@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix adms: <http://www.w3.org/ns/adms#> .
@prefix cc: <http://creativecommons.org/ns#> .
@prefix dcat: <http://www.w3.org/ns/dcat#> .
@prefix dct: <http://purl.org/dc/terms/> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix locn: <http://www.w3.org/ns/locn#> .
@prefix geo: <http://www.opengis.net/ont/geosparql#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix prov: <http://www.w3.org/ns/prov#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix time: <http://www.w3.org/2006/time#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix dcatapes: <https://datosgobes.github.io/DCAT-AP-ES/#> .
@prefix dcatap: <http://data.europa.eu/r5r/> .

<https://datosgobes.github.io/DCAT-AP-ES/releases/1.0.0/shacl/shacl_dataset_shape.ttl>
    rdf:type owl:Ontology ;
    rdfs:label "Restricciones para los conjuntos de datos DCAT-AP-ES"@es ;
    rdfs:label "Dataset restrictions for DCAT-AP-ES"@en ;
    dcat:downloadURL <https://datosgobes.github.io/DCAT-AP-ES/releases/1.0.0/shacl/shacl_dataset_shape.ttl> ;
    dct:format <http://publications.europa.eu/resource/authority/file-type/RDF_TURTLE> ;
    dct:conformsTo <https://www.w3.org/TR/shacl> ;
    dct:description "Este archivo incluye las restricciones SHACL para las propiedades y clases relacionadas con conjuntos de datos en el perfil de aplicación DCAT-AP-ES."@es ;
    dct:description "This file includes SHACL restrictions for properties and classes related to dataset in the DCAT-AP-ES application profile."@en ;
    owl:versionInfo "1.0.0" ;
    dct:modified "2024-04-08"^^xsd:date ;
    dct:publisher <http://datos.gob.es/recurso/sector-publico/org/Organismo/E0DAT0001> ;
    cc:attributionURL <https://datos.gob.es/> ;
    dcatap:availability <http://data.europa.eu/r5r/stable> ;
    foaf:homepage <https://datosgobes.github.io/DCAT-AP-ES/> ;
    rdfs:seeAlso <https://datosgobes.github.io/DCAT-AP-ES/#Dataset> ;
    rdfs:comment """
        Este archivo requiere importar las siguientes dependencias adicionales para funcionar correctamente:
        - shacl_common_shapes.ttl
        - shacl_mdr-vocabularies.shape.ttl
        - shacl_distribution_shape.ttl
        Asegúrese de que estén disponibles e importadas para una validación completa.
    """@es ;
    rdfs:comment """
        This file requires importing the following additional dependencies to work properly:
        - shacl_common_shapes.ttl
        - shacl_mdr-vocabularies.shape.ttl
        - shacl_distribution_shape.ttl
        Make sure they are available and imported for full validation.
    """@en .


#--------------------------
# dcat:Dataset restrictions
#--------------------------
dcatapes:Dataset_Shape
    a sh:NodeShape ;
    sh:name "Conjunto de datos"@en ;
    sh:name "Dataset"@en ;
    rdfs:comment "Forma que define las restricciones para la clase dcat:Dataset."@es ;
    rdfs:comment "Shape defining restrictions for the dcat:Dataset class."@en ;
    rdfs:label "Restricciones de conjunto de datos"@es ;
    rdfs:label "Dataset restrictions"@en ;
    foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset> ;
    sh:property 
    [
    # dct:title
        sh:path dct:title ;
        sh:minCount 1 ;
        sh:nodeKind sh:Literal ;
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.title> ;
        sh:message "El conjunto de datos debe contener al menos un dct:title."@es ;
        sh:message "The dataset must contain at least one dct:title."@en ;
    ], 
    [
        sh:path dct:title ;
        sh:node dcatapes:LiteralMultilingualConvention ; 
        sh:severity sh:Violation ;
    ],
    [
        sh:path dct:title ;
        sh:node dcatapes:NonEmptyLiteralConvention ; 
        sh:severity sh:Violation ;
    ],
    [
        sh:path dct:title ;
        sh:uniqueLang true ;
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/convenciones/#convencion-02> ;
        sh:message "Más de un valor comparten la misma etiqueta de idioma. Ver: https://datosgobes.github.io/DCAT-AP-ES/convenciones/#convencion-02"@es ;
        sh:message "More than one value shares the same language tag. See: https://datosgobes.github.io/DCAT-AP-ES/convenciones/#convencion-02"@en ;
    ],

    # dct:description
    [
        sh:path dct:description ;
        sh:nodeKind sh:Literal ;
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.description> ;
        sh:message "El valor de dct:description debe ser un Literal."@es ;
        sh:message "The value of dct:description must be a Literal."@en ;
    ], 
    [
        sh:path dct:description ;
        sh:minCount 1 ;
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.description> ;
        sh:message "El conjunto de datos debe contener al menos un dct:description."@es ;
        sh:message "The dataset must contain at least one dct:description."@en ;
    ], 
    [
        sh:path dct:description ;
        sh:node dcatapes:LiteralMultilingualConvention ;
        sh:severity sh:Violation ;
    ],
    [
        sh:path dct:description ;
        sh:node dcatapes:NonEmptyLiteralConvention ;
        sh:severity sh:Violation ; 
    ],
    [
        sh:path dct:description ;
        sh:uniqueLang true ;
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/convenciones/#convencion-02> ;
        sh:message "Más de un valor comparten la misma etiqueta de idioma. Ver: https://datosgobes.github.io/DCAT-AP-ES/convenciones/#convencion-02"@es ;
        sh:message "More than one value shares the same language tag. See: https://datosgobes.github.io/DCAT-AP-ES/convenciones/#convencion-02"@en ;
    ],

    # dct:publisher
    [
        sh:path dct:publisher ;
        sh:minCount 1 ;
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.publisher> ;
        sh:message "El conjunto de datos debe contener al menos un dct:publisher."@es ;
        sh:message "The dataset must contain at least one dct:publisher."@en ;
    ], 
    [
        sh:path dct:publisher ;
        sh:maxCount 1 ;
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.publisher> ;
        sh:message "La propiedad dct:publisher no puede tener más de un valor."@es ;
        sh:message "The dct:publisher property cannot have more than one value."@en ;
    ],
    [
        sh:path dct:publisher ;
        sh:node dcatapes:DIR3OrganismRestriction;
        sh:or(
            [
                sh:nodeKind sh:IRI; 
                sh:closed true ;
            ]
            [
                sh:nodeKind sh:BlankNodeOrIRI;
                sh:node dcatapes:Agent_Shape;
                sh:node dcatapes:PublisherAgentRestriction;
            ]
        );
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.publisher> ;
        sh:message "El valor de dct:publisher debe ser un IRI o un nodo en blanco que cumpla con las restricciones de la forma de agente."@es ;
        sh:message "The value of dct:publisher must be an IRI or a blank node that meets the agent shape restrictions."@en ;
    ],
    [
        sh:path dct:publisher ;
        sh:or(
            [ 
                sh:nodeKind sh:IRI;
                sh:closed true
            ]
            [
                sh:nodeKind sh:BlankNodeOrIRI;
                sh:node dcatapes:Agent_ShapeRecommended
            ]
        );
        sh:severity sh:Warning ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.publisher> ;
        sh:message "El valor de dct:publisher debe ser un IRI o un nodo en blanco que cumpla con las restricciones de la forma de agente."@es ;
        sh:message "The value of dct:publisher must be an IRI or a blank node that meets the agent shape restrictions."@en ;
    ],

    # dcat:theme
    [
        sh:path dcat:theme ;
        sh:minCount 1 ;
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.theme> ;
        sh:message "El conjunto de datos debe contener al menos un dcat:theme."@es ;
        sh:message "The dataset must contain at least one dcat:theme."@en ;
    ], 
    [
		sh:path dcat:theme ;
	    sh:qualifiedValueShape [
			sh:node dcatapes:PublicSectorRestriction ;
		];	
        sh:qualifiedMinCount 1;
        sh:severity sh:Violation
    ],
    [
        sh:path dcat:theme ;
        sh:nodeKind sh:IRI ;
        sh:or(
            [   
                sh:node dcatapes:PublicSectorRestriction ;
            ]
            [   
                sh:node dcatapes:EuropeanDataThemeRestriction ;
            ]
            [
                sh:node dcatapes:InspireDataThemeRestriction ;
            ]
        );
        sh:severity sh:Violation
    ],

    # dcat:Distribution
    [
        sh:path dcat:distribution ;
        sh:class dcat:Distribution ;
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.distribution> ;
        sh:message "El valor de dcat:distribution debe ser un dcat:Distribution."@es ;
        sh:message "The value of dcat:distribution must be a dcat:Distribution."@en ;
    ], 
    # Convención 23
    [
        sh:path dcat:distribution ;
        sh:minCount 1 ;
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/conventions/#convencion-23> ;
        sh:message "Todo recurso de tipo dcat:Dataset debe contener al menos una instancia de dcat:Distribution. Ver: https://datosgobes.github.io/DCAT-AP-ES/conventions/#convencion-23"@es ;
        sh:message "All dcat:Dataset resources must contain at least one instance of dcat:Distribution. See: https://datosgobes.github.io/DCAT-AP-ES/conventions/#convencion-23"@en ;
    ], 
    # dcat:keyword
    [
        sh:path dcat:keyword ;
        sh:nodeKind sh:Literal ;
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.keyword> ;
        sh:message "El valor de dcat:keyword ser un Literal."@es ;
        sh:message "The value of dcat:keyword must be a Literal."@en ;
    ],
    [
        sh:path dcat:keyword ;
        sh:minCount 1 ;
        sh:severity sh:Warning ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.keyword> ;
        sh:message "Todo recurso de tipo dcat:Dataset debería contener al menos una instancia de dcat:keyword."@es ;
        sh:message "All dcat:Dataset resources must contain at least one instance of dcat:keyword."@en ;
    ], 
    [
        sh:path dcat:keyword ;
        sh:node dcatapes:LiteralMultilingualConvention ; 
        sh:severity sh:Violation ;
    ],
    [
        sh:path dcat:keyword ;
        sh:node dcatapes:NonEmptyLiteralConvention ; 
        sh:severity sh:Violation ;
    ],

    # dcat:contactPoint
    [
        sh:path dcat:contactPoint ;
        sh:not dcatapes:DIR3OrganismRestriction ;
        sh:severity sh:Violation
    ],
    [
        sh:path dcat:contactPoint ;
        sh:node dcatapes:VcardKindMinimalConvention ;
        sh:severity sh:Warning ;
    ],
    [
        sh:path dcat:contactPoint ;
        sh:node dcatapes:VcardKindRestriction2 ;
        sh:severity sh:Violation
    ],
    [
        sh:path dcat:contactPoint ;
        sh:minCount 1 ;
        sh:severity sh:Warning ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.contactpoint> ;
        sh:message "El conjunto de datos debería contener al menos un dcat:contactPoint."@es ;
        sh:message "The dataset should contain at least one dcat:contactPoint."@en ;
    ], 

    # dct:temporal
    [
        sh:path dct:temporal ;
        sh:minCount 1 ;
        sh:severity sh:Warning ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.temporal> ;
        sh:message "El conjunto de datos debería contener al menos un dct:temporal."@es ;
        sh:message "The dataset should contain at least one dct:temporal."@en ;
    ], 
    [
        sh:path dct:temporal ;
        sh:node dcatapes:TemporalPeriodConvention ;
        sh:severity sh:Violation ;
    ],

    # dct:spatial
    [
        sh:path dct:spatial ;
        sh:minCount 1 ;
        sh:severity sh:Warning ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.spatial> ;
        sh:message "El conjunto de datos debe contener al menos un valor para dct:spatial."@es ;
        sh:message "The dataset must contain at least one value for dct:spatial."@en ;
    ],

    [
        sh:path dct:spatial ;
        sh:or (
            [
                sh:nodeKind sh:IRI ;
                sh:node dcatapes:Spatial_Shape ;
            ]
            [
                sh:class dct:Location ;
            ]
        );
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.spatial> ;
        sh:message "El valor de dct:spatial debe ser un IRI de los vocabularios permitidos o un nodo de tipo Location."@es ;
        sh:message "The value of dct:spatial must be an IRI from the allowed vocabularies or a Location node."@en ;
    ],

    # dct:identifier
    [
        sh:path dct:identifier ;
        sh:node dcatapes:NonLiteralMultilingualConvention ;
        sh:severity sh:Violation
    ],
    [
        sh:path dct:identifier ;
        sh:node dcatapes:NonEmptyLiteralConvention;
        sh:severity sh:Violation
    ],

    # adms:identifier
    [
        sh:path adms:identifier ;
        sh:class adms:Identifier ;
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.identifier> ;
        sh:message "El valor de adms:identifier debe ser un adms:Identifier."@es ;
        sh:message "The value of adms:identifier must be a adms:Identifier."@en ;
    ], 

    # dct:creator  
    [
        sh:path dct:creator ;
        sh:or(
            [   
                sh:node dcatapes:DIR3OrganismRestriction ;  
                sh:nodeKind sh:IRI ;
                sh:closed true ;
            ]
            [
                sh:nodeKind sh:BlankNodeOrIRI ;
                sh:node dcatapes:Agent_Shape ;
                sh:or(
                    [
                        sh:node dcatapes:DIR3OrganismRestriction ;
                        sh:node dcatapes:PublisherAgentRestriction ;
                    ]
                    [
                        sh:not dcatapes:DIR3OrganismRestriction ;
                        sh:node dcatapes:CreatorAgentRestriction ;
                    ]
                );
            ]
        ); 
    ],
    [
        sh:path dct:creator ;
        sh:or(
            [ 
                sh:nodeKind sh:IRI ;
                sh:closed true
            ]
            [
                sh:nodeKind sh:BlankNodeOrIRI ;
                sh:node dcatapes:Agent_ShapeRecommended ;
            ]
        );
        sh:severity sh:Warning ;
    ],

    # foaf:page
    [
        sh:path foaf:page ;
        sh:nodeKind sh:IRI;
        #sh:class foaf:Document ;
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.page> ;
        sh:message "El valor de foaf:page debe ser un IRI válido."@es ;
        sh:message "The value of foaf:page must be a valid IRI."@en ;
    ], 

    # dcat:landingPage 
    [
        sh:path dcat:landingPage ;
        sh:nodeKind sh:IRI;
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.landingPage> ;
        sh:message "El valor de dcat:landingPage debe ser un IRI válido."@es ;
        sh:message "The value of dcat:landingPage must be a valid IRI."@en ;
    ], 

    # adms:sample
    [
        sh:path adms:sample ;
        sh:class dcat:Distribution ;
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.sample> ;
        sh:message "El valor de adms:sample debe ser un dcat:Distribution."@es ;
        sh:message "The value of adms:sample must be a dcat:Distribution."@en ;
    ], 

    # dct:conformsTo 
    [
        sh:path dct:conformsTo ;
        sh:nodeKind sh:IRI; 
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.conformsTo> ;
        sh:message "El valor de dct:conformsTo debe ser un IRI válido."@es ;
        sh:message "The value of dct:conformsTo must be a valid IRI."@en ;
    ], 

    # dct:issued
    [
        sh:path dct:issued ;
        sh:maxCount 1 ;
        sh:nodeKind sh:Literal ;
        sh:node dcatapes:DateOrDateTimeDataTypetConvention ;
        sh:severity sh:Violation ;
    ],

    # dct:modified 
    [
        sh:path dct:modified ;
        sh:maxCount 1 ;
        sh:nodeKind sh:Literal ;
        sh:node dcatapes:DateOrDateTimeDataTypetConvention ;
        sh:severity sh:Violation ;
    ], 

    # dct:type
    [
        sh:path dct:type ;
        sh:maxCount 1 ;
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.type> ;
        sh:message "Solo puede haber un tipo para el conjunto de datos."@es ;
        sh:message "There can only be one type for the dataset."@en ;
    ],
    [
        sh:path dct:type ;
        #sh:class skos:Concept
        sh:nodeKind sh:IRI ;
        sh:or(
            [
                sh:node dcatapes:DatasetTypeRestriction
            ]
            [
                sh:node dcatapes:INSPIREDatasetTypeRestriction
            ]
        );
        sh:severity sh:Warning ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.type> ;
        sh:message "El valor de dct:type debería ser un IRI de los vocabularios <http://publications.europa.eu/resource/authority/dataset-type> o <http://inspire.ec.europa.eu/metadata-codelist/ResourceType/dataset>"@es ;
        sh:message "The value of dct:type should be an IRI from vocabularies <http://publications.europa.eu/resource/authority/dataset-type> or <http://inspire.ec.europa.eu/metadata-codelist/ResourceType/dataset>."@en ;
    ], 

    # dct:language
    [
        sh:path dct:language ;
        sh:node dcatapes:LanguageRestriction ;
        sh:severity sh:Violation ;
    ], 

    # dct:accrualPeriodicity
    [
        sh:path dct:accrualPeriodicity ;
        sh:or (
            [ 
                # IRI from european vocabulary
                sh:nodeKind sh:IRI ;
                sh:node dcatapes:FrequencyRestriction ;
            ]
            [ 
                # Frequency node
                sh:class dct:Frequency ;
            ]
            [ 
                # Literal of xsd:duration type (NTI legacy)
                sh:nodeKind sh:Literal ;
                sh:datatype xsd:duration ;
                sh:node dcatapes:DurationRestriction;
            ]
        );
        sh:severity sh:Violation;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.accrualPeriodicity> ;
        sh:message "El valor de dct:accrualPeriodicity debe ser un IRI de los vocabularios permitidos o un Literal de tipo xsd:duration."@es ;
        sh:message "The value of dct:accrualPeriodicity must be an IRI from the allowed vocabularies or a Literal of type xsd:duration."@en ;
    ],
    [
        sh:path dct:accrualPeriodicity ;
        sh:maxCount 1 ;
        sh:severity sh:Violation;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.accrualPeriodicity> ;
        sh:message "La propiedad dct:accrualPeriodicity no puede tener más de un valor."@es ;
        sh:message "The dct:accrualPeriodicity property cannot have more than one value."@en ;
    ],
    # dcat:version
    [
        sh:path dcat:version ;
        sh:node dcatapes:NonLiteralMultilingualConvention ;
        sh:severity sh:Violation
    ],
    [
        sh:path dcat:version ;
        sh:node dcatapes:NonEmptyLiteralConvention ;
        sh:severity sh:Violation
    ],
    [
        sh:path dcat:version ;
        sh:maxCount 1 ;
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.version> ;
        sh:message "La propiedad dcat:version no puede tener más de un valor."@es ;
        sh:message "The dcat:version property cannot have more than one value."@en ;
    ],

    # adms:versionNotes 
    [
        sh:path adms:versionNotes ;
        sh:nodeKind sh:Literal ;
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.versionNotes> ;
        sh:message "El valor de adms:versionNotes debe ser un Literal."@es ;
        sh:message "The value of adms:versionNotes must be a Literal."@en ;
    ], 
    [
        sh:path adms:versionNotes ;
        sh:node dcatapes:LiteralMultilingualConvention ; 
        sh:severity sh:Violation ;
    ],
    [
        sh:path adms:versionNotes ;
        sh:node dcatapes:NonEmptyLiteralConvention ; 
        sh:severity sh:Violation ;
    ],
    [
        sh:path adms:versionNotes ;
        sh:uniqueLang true ;
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/convenciones/#convencion-02> ;
        sh:message "Las notas de la versión debe tener al menos un valor en español (etiqueta de idioma 'es'). Ver: https://datosgobes.github.io/DCAT-AP-ES/convenciones/#convencion-02"@es ;
        sh:message "The version notes must have at least one value in Spanish (language tag 'es') See: https://datosgobes.github.io/DCAT-AP-ES/convenciones/#convencion-02"@en ;
    ],
    [
        sh:path adms:versionNotes ;
        sh:uniqueLang true ;
        sh:severity sh:Violation ;
        sh:sparql [
            sh:message "The version notes value must be at least in Spanish."@en ;
            sh:select """
                PREFIX adms: <http://www.w3.org/ns/adms#>
                SELECT $this
                WHERE {
                FILTER EXISTS { $this adms:versionNotes ?value }

                FILTER NOT EXISTS {
                    $this adms:versionNotes ?value .
                    FILTER(isLiteral(?value) && LANG(?value) = "es")
                }
            }
            """ ;
        ] ;
    ],

    # dcat:hasVersion
    [
        sh:path dct:hasVersion ;
        sh:nodeKind sh:IRI; 
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.hasVersion> ;
        sh:message "El valor de dct:hasVersion debe ser un IRI válido."@es ;
        sh:message "The value of dct:hasVersion must be a valid IRI."@en ;
    ], 

    # dcat:isVersionOf
    [
        sh:path dct:isVersionOf ;
        sh:nodeKind sh:IRI; 
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.isVersionOf> ;
        sh:message "El valor de dct:isVersionOf debe ser un IRI válido."@es ;
        sh:message "The value of dct:isVersionOf must be a valid IRI."@en ;
    ], 

    # dcat:qualifiedRelation
    [
        sh:path dcat:qualifiedRelation ;
        sh:class dcat:Relationship ;
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.qualifiedRelation> ;
        sh:message "El valor de dcat:qualifiedRelation debe ser un dcat:Relationship."@es ;
        sh:message "The value of dcat:qualifiedRelation must be a dcat:Relationship."@en ;
    ], 

    # dcat:spatialResolutionInMeters
    [
        sh:path dcat:spatialResolutionInMeters ;
        sh:nodeKind sh:Literal ;
        sh:or (
            [ sh:datatype xsd:decimal ]
            [ sh:datatype xsd:double ]
            [ sh:datatype xsd:integer ]
        ) ;
        sh:minInclusive 0;
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.spatialResolutionInMeters> ;
        sh:message "El valor de dcat:spatialResolutionInMeters debe ser un Literal de tipo xsd:decimal o xsd:double."@es ;
        sh:message "The value of dcat:spatialResolutionInMeters must be a Literal of type xsd:decimal or xsd:double."@en ;
    ], 
    [
        sh:path dcat:spatialResolutionInMeters ;
        sh:maxCount 1 ;
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.spatialResolutionInMeters> ;
        sh:message "La propiedad dcat:spatialResolutionInMeters no puede tener más de un valor."@es ;
        sh:message "The dcat:spatialResolutionInMeters property cannot have more than one value."@en ;
    ],

    # dcat:temporalResolution
    [
        sh:path dcat:temporalResolution ;
        sh:maxCount 1 ;
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.temporalResolution> ;
        sh:message "La propiedad dcat:temporalResolution no puede tener más de un valor."@es ;
        sh:message "The dcat:temporalResolution property cannot have more than one value."@en ;
    ],
    [
        sh:path dcat:temporalResolution ;
        sh:nodeKind sh:Literal ;
        sh:datatype xsd:duration ;
        sh:node dcatapes:DurationRestriction;
        sh:severity sh:Violation ;
    ],

    # dct:isReferencedBy
    [
        sh:path dct:isReferencedBy ;
        sh:nodeKind sh:IRI ; 
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.isReferencedBy> ;
        sh:message "El valor de dct:isReferencedBy debe ser un IRI válido."@es ;
        sh:message "The value of dct:isReferencedBy must be a valid IRI."@en ;
    ], 

    # dct:provenance  
    [
        sh:path dct:provenance ;
        sh:or(
            [
                sh:nodeKind sh:IRI ;
                sh:closed true ;
            ]
            [
        sh:property
            [
                sh:path rdf:type;
                sh:hasValue dct:ProvenanceStatement ;
                ]
            ]
        );
        sh:message "The property dct:provenance must either be an IRI without an associated node, or an IRI describing a dct:ProvenanceStatement node.";
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.provenance> ;
        sh:message "El valor de dct:provenance debe ser o bien un IRI sin nodo asociado, o bien un IRI que describa un nodo dct:ProvenanceStatement."@es ;
        sh:message "The value of dct:provenance must either be an IRI without an associated node, or an IRI describing a dct:ProvenanceStatement node."@en ;
    ],

    # dct:relation
    [
        sh:path dct:relation ;
        sh:nodeKind sh:IRI; 
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.relation> ;
        sh:message "El valor de dct:relation debe ser un IRI válido."@es ;
        sh:message "The value of dct:relation must be a valid IRI."@en ;
    ], 

    # prov:qualifiedAttribution   
    [
        sh:path prov:qualifiedAttribution ;
        sh:class prov:Attribution ;
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.qualifiedAttribution> ;
        sh:message "El valor de prov:qualifiedAttribution debe ser un nodo de tipo prov:Attribution."@es ;
        sh:message "The value of prov:qualifiedAttribution must be a node of type prov:Attribution."@en ;
    ], 

    # prov:wasGeneratedBy
    [
        sh:path prov:wasGeneratedBy ;
        sh:class prov:Activity ;
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.wasGeneratedBy> ;
        sh:message "El valor de prov:wasGeneratedBy debe ser un nodo de tipo prov:Activity."@es ;
        sh:message "The value of prov:wasGeneratedBy must be a node of type prov:Activity."@en ;
    ], 

    # dct:source
    [
        sh:path dct:source ;
        sh:nodeKind sh:IRI ; 
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.source> ;
        sh:message "El valor de dct:source debe ser un IRI válido."@es ;
        sh:message "The value of dct:source must be a valid IRI."@en ;
    ], 

    # dct:accessRights 
    [
        sh:path dct:accessRights ;
        sh:maxCount 1 ;
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.accessRights> ;
        sh:message "La propiedad dct:accessRights no puede tener más de un valor."@es ;
        sh:message "The dct:accessRights property cannot have more than one value."@en ;
    ],
    [
        sh:path dct:accessRights ;
        sh:nodeKind sh:IRI ;
		sh:node dcatapes:AccessRightRestriction ;
        sh:severity sh:Violation ;
	],

    # dcat:hasVersion
    [
        sh:path dcat:hasVersion ;
        sh:nodeKind sh:IRI ;
        sh:class dcat:Dataset ;
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.hasVersion> ;
        sh:message "El valor de dcat:hasVersion debe ser un IRI válido que apunte a un dcat:Dataset."@es ;
        sh:message "The value of dcat:hasVersion must be a valid IRI pointing to a dcat:Dataset."@en ;
    ],

    # dcat:isVersionOf
    [
        sh:path dcat:isVersionOf ;
        sh:nodeKind sh:IRI ;
        sh:class dcat:Dataset ;
        sh:severity sh:Violation ;
        foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.isVersionOf> ;
        sh:message "El valor de dcat:isVersionOf debe ser un IRI válido que apunte a un dcat:Dataset."@es ;
        sh:message "The value of dcat:isVersionOf must be a valid IRI pointing to a dcat:Dataset."@en ;
    ];
    sh:targetClass dcat:Dataset .

# Convencion 02
dcatapes:DatasetSPALanguageConvention
    a sh:NodeShape ;
    rdfs:comment "Restricción para validar que un conjunto de datos cumpla con las convenciones de idioma y contenido en español, incluyendo título, descripción y otros elementos clave."@es ;
    rdfs:comment "Restriction to validate that a dataset complies with Spanish language and content conventions, including title, description, and other key elements."@en ;
    rdfs:label "Restricción de conjunto de datos: idioma y contenido en español"@es ;
    rdfs:label "Dataset restriction: Spanish language and content"@en ;
    sh:name "Dataset Spanish Language and Content Restriction"@en ;
    sh:name "Restricción de conjunto de datos: idioma y contenido en español"@es ;
    sh:node dcatapes:SpanishLanguageRestriction ;
    sh:node dcatapes:SpanishTitleRestriction ;
    sh:node dcatapes:SpanishDescriptionRestriction ;
    sh:severity sh:Violation ;
    foaf:page <https://datosgobes.github.io/DCAT-AP-ES/convenciones/#convencion-02> ;
    sh:targetClass dcat:Dataset .

# Convencion 23
dcatapes:DistributionMandatoryConvention
    a sh:NodeShape ;
    rdfs:comment "Restricción para validar que los conjuntos de datos contengan al menos una distribución (dcat:distribution), cumpliendo con la Convención 23 de DCAT-AP-ES."@es ;
    rdfs:comment "Restriction to validate that datasets include at least one distribution (dcat:distribution), complying with DCAT-AP-ES Convention 23."@en ;
    rdfs:label "Restricción para distribuciones obligatorias"@es ;
    rdfs:label "Mandatory Distribution Restriction"@en ;
    sh:targetClass dcat:Dataset ;
    sh:property 
    [
        # dcat:distribution
        sh:path dcat:distribution ;
        sh:minCount 1 ;
        sh:message "El conjunto de datos debe contener al menos una distribución (dcat:distribution). Ver: https://datosgobes.github.io/DCAT-AP-ES/convenciones/#convencion-23"@es ;
        sh:message "The dataset must contain at least one distribution (dcat:distribution). See: https://datosgobes.github.io/DCAT-AP-ES/convenciones/#convencion-23"@en ;
    ] ;
    sh:severity sh:Violation ;
    foaf:page <https://datosgobes.github.io/DCAT-AP-ES/convenciones/#convencion-23> ;
    sh:message "El conjunto de datos debe contener al menos una distribución (dcat:distribution). Ver: https://datosgobes.github.io/DCAT-AP-ES/convenciones/#convencion-23"@es ;
    sh:message "The dataset must contain at least one distribution (dcat:distribution). See: https://datosgobes.github.io/DCAT-AP-ES/convenciones/#convencion-23"@en .

#---------------------------
# Other shapes restrictions
#---------------------------

dcatapes:Activity_Shape
    a sh:NodeShape ;
    rdfs:comment "Restricción para validar que los nodos de tipo prov:Activity tengan propiedades temporales correctamente definidas."@es ;
    rdfs:comment "Restriction to validate that nodes of type prov:Activity have properly defined temporal properties."@en ;
    rdfs:label "Restricción para actividades"@es ;
    rdfs:label "Activity Restriction"@en ;
    sh:name "Restricción para actividades"@es ;
    sh:name "Activity Restriction"@en ;
    sh:property 
    # prov:    sh:name "Activity Restriction"@en ;
    [
        sh:path prov:startedAtTime ;
        sh:minCount 1 ;
        sh:severity sh:Warning ;
        sh:message "La propiedad prov:startedAtTime debería estar presente al menos una vez."@es ;
        sh:message "The property prov:startedAtTime should be present at least once."@en ;
    ], 
    [
        sh:path prov:startedAtTime ;
        sh:nodeKind sh:Literal ;
        sh:node dcatapes:DateOrDateTimeDataTypetConvention ;
        sh:severity sh:Violation ;
        sh:message "El valor de prov:startedAtTime debe ser un literal de tipo fecha o fecha-hora."@es ;
        sh:message "The value of prov:startedAtTime must be a literal of type date or date-time."@en ;
    ],
    # prov:endedAtTime
    [
        sh:path prov:endedAtTime ;
        sh:minCount 1 ;
        sh:severity sh:Warning ;
        sh:message "La propiedad prov:endedAtTime debería estar presente al menos una vez."@es ;
        sh:message "The property prov:endedAtTime should be present at least once."@en ;
    ], 
    [
        sh:path prov:endedAtTime ;
        sh:nodeKind sh:Literal ;
        sh:node dcatapes:DateOrDateTimeDataTypetConvention ;
        sh:severity sh:Violation ;
        sh:message "El valor de prov:endedAtTime debe ser un literal de tipo fecha o fecha-hora."@es ;
        sh:message "The value of prov:endedAtTime must be a literal of type date or date-time."@en ;
    ] ;
    sh:targetClass prov:Activity .

dcatapes:Attribution_Shape
    a sh:NodeShape ;
    rdfs:comment "Restricción para validar que los nodos de tipo prov:Attribution tengan un agente y, opcionalmente, un rol definido."@es ;
    rdfs:comment "Restriction to validate that nodes of type prov:Attribution have an agent and, optionally, a defined role."@en ;
    rdfs:label "Restricción para atribuciones"@es ;
    rdfs:label "Attribution Restriction"@en ;
    sh:name "Restricción para atribuciones"@es ;
    sh:name "Attribution Restriction"@en ;
    sh:property 
    # prov:agent
    [
        sh:path prov:agent ;
        sh:minCount 1 ;
        sh:severity sh:Violation;
        sh:message "La propiedad prov:agent debe estar presente al menos una vez."@es ;
        sh:message "The property prov:agent must be present at least once."@en ;
    ], 
    [
        sh:path prov:agent ;
        sh:nodeKind sh:IRI ;
        sh:severity sh:Violation;
        sh:message "El valor de prov:agent debe ser un IRI."@es ;
        sh:message "The value of prov:agent must be an IRI."@en ;
    ], 
    # dcat:hadRole
    [
        sh:path dcat:hadRole ;
        sh:minCount 1 ;
        sh:severity sh:Warning;
        sh:message "La propiedad dcat:hadRole debería estar presente al menos una vez."@es ;
        sh:message "The property dcat:hadRole should be present at least once."@en ;
    ], 
    [
        sh:path dcat:hadRole ;
        sh:nodeKind sh:IRI ;
        sh:severity sh:Violation;
        sh:message "El valor de dcat:hadRole debe ser un IRI."@es ;
        sh:message "The value of dcat:hadRole must be an IRI."@en ;
    ];
    sh:targetClass prov:Attribution .

dcatapes:DurationDescription_Shape
    a sh:NodeShape ;
    rdfs:comment "Restricción para validar que los nodos de tipo time:DurationDescription contengan exactamente una propiedad de medida temporal."@es ;
    rdfs:comment "Restriction to validate that time:DurationDescription nodes contain exactly one temporal measurement property."@en ;
    rdfs:label "Restricción para descripciones de duración"@es ;
    rdfs:label "Duration Description Restriction"@en ;
    sh:name "Descripción de duración temporal"@es ;
    sh:name "Time Duration Description"@en ;
    sh:targetClass time:DurationDescription ;
    sh:xone (
        dcatapes:TimeYearsRestriction
        dcatapes:TimeMonthsRestriction
        dcatapes:TimeWeeksRestriction
        dcatapes:TimeDaysRestriction
        dcatapes:TimeHoursRestriction
        dcatapes:TimeMinutesRestriction
        dcatapes:TimeSecondsRestriction
    );
    sh:severity sh:Violation ;
    foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.accrualPeriodicity> ;
    sh:message "Un time:DurationDescription de un dct:Frequency debe tener exactamente una de las propiedades: time:years, time:months, time:weeks, time:days, time:hours, time:minutes, o time:seconds."@es ;
    sh:message "A time:DurationDescription of a dct:Frequency must have exactly one of the properties: time:years, time:months, time:weeks, time:days, time:hours, time:minutes, or time:seconds."@en .

dcatapes:Frequency_Shape
    a sh:NodeShape ;
    rdfs:comment "Restricción para validar que los nodos de tipo dct:Frequency definidos localmente contengan exactamente un valor de duración correctamente definido."@es ;
    rdfs:comment "Restriction to validate that locally defined nodes of type dct:Frequency contain exactly one properly defined duration value."@en ;
    rdfs:label "Restricción para frecuencias"@es ;
    rdfs:label "Frequency Restriction"@en ;
    sh:name "Frecuencia"@es ;
    sh:name "Frequency"@en ;
    
    # En lugar de sh:targetClass dct:Frequency, usa un target más específico
    sh:target [
        a sh:SPARQLTarget ;
        sh:prefixes [
            sh:declare [
                sh:prefix "dct" ;
                sh:namespace "http://purl.org/dc/terms/"^^xsd:anyURI ;
            ] ;
            sh:declare [
                sh:prefix "rdf" ;
                sh:namespace "http://www.w3.org/1999/02/22-rdf-syntax-ns#"^^xsd:anyURI ;
            ]
        ] ;
        sh:select """
            SELECT ?this WHERE {
                ?this a dct:Frequency .
                # Excluir URIs del vocabulario oficial
                FILTER(!STRSTARTS(STR(?this), "http://publications.europa.eu/resource/authority/frequency/"))
            }
        """ ;
    ] ;

    sh:property [
        sh:path rdf:value ;
        sh:or (
            [ 
                # Duration Description node
                sh:class time:DurationDescription ;
            ]
            [ 
                # Literal Duration
                sh:nodeKind sh:Literal ;
                sh:datatype xsd:duration ;
                sh:node dcatapes:DurationRestriction ;
            ]
        ) ;
        sh:severity sh:Violation ;
        sh:message "El valor de rdf:value debe ser un nodo de tipo time:DurationDescription o un literal de tipo xsd:duration."@es ;
        sh:message "The value of rdf:value must be a node of type time:DurationDescription or a literal of type xsd:duration."@en ;
    ],
    [
        sh:path rdf:value ;
        sh:minCount 1 ;
        sh:severity sh:Violation ;
        sh:message "La propiedad rdf:value debe estar presente exactamente una vez."@es ;
        sh:message "The rdf:value property must be present exactly once."@en ;
    ],
    [
        sh:path rdf:value ;
        sh:maxCount 1 ;
        sh:severity sh:Violation ;
        sh:message "La propiedad rdf:value no puede tener más de un valor."@es ;
        sh:message "The rdf:value property cannot have more than one value."@en ;
    ] ;
    sh:severity sh:Violation ;
    foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.frequency> .

dcatapes:ADMSIdentifier_Shape
    # https://www.w3.org/TR/vocab-adms/#identifier
    a sh:NodeShape ;
    rdfs:comment "Restricción para validar que los identificadores ADMS contengan exactamente un valor de notación no vacío."@es ;
    rdfs:comment "Restriction to validate that ADMS identifiers contain exactly one non-empty notation value."@en ;
    rdfs:label "Restricción para identificadores ADMS"@es ;
    rdfs:label "ADMS Identifier Restriction"@en ;
    sh:name "Identificador ADMS"@es ;
    sh:name "Identifier"@en ;
    sh:targetClass adms:Identifier ;
    sh:property 
    # skos:notation
    [
        sh:path skos:notation ;
        sh:node dcatapes:NonLiteralMultilingualConvention ;
        sh:severity sh:Violation ;
        sh:message "El valor de skos:notation debe ser un literal sin etiqueta de idioma."@es ;
        sh:message "The value of skos:notation must be a literal without a language tag."@en ;
    ],
    [
        sh:path skos:notation ;
        sh:node dcatapes:NonEmptyLiteralConvention;
        sh:severity sh:Violation ;
        sh:message "El valor de skos:notation no puede estar vacío."@es ;
        sh:message "The value of skos:notation cannot be empty."@en ;
    ],
    [
        sh:path skos:notation ;
        sh:minCount 1 ;
        sh:severity sh:Violation ;
        sh:message "La propiedad skos:notation debe estar presente al menos una vez."@es ;
        sh:message "The skos:notation property must be present at least once."@en ;
    ],
    [
        sh:path skos:notation ;
        sh:maxCount 1 ;
        sh:severity sh:Violation ;
        sh:message "La propiedad skos:notation no puede tener más de un valor."@es ;
        sh:message "The skos:notation property cannot have more than one value."@en ;
    ] ;
    sh:severity sh:Violation ;
    foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.identifier> ;
    sh:message "El valor de adms:identifier debe ser un adms:Identifier."@es ;
    sh:message "The value of adms:identifier must be a adms:Identifier."@en .
    

dcatapes:Relationship_Shape
    a sh:NodeShape ;
    rdfs:comment "Restricción para validar que los nodos de tipo dcat:Relationship contengan las propiedades obligatorias correctamente definidas."@es ;
    rdfs:comment "Restriction to validate that nodes of type dcat:Relationship contain properly defined mandatory properties."@en ;
    rdfs:label "Restricción para relaciones"@es ;
    rdfs:label "Relationship Restriction"@en ;
    sh:name "Relación"@es ;
    sh:name "Relationship"@en ;
    sh:targetClass dcat:Relationship ;
    sh:property 
    # dct:relation 
    [
        sh:path dct:relation ;
        sh:minCount 1 ;
        sh:severity sh:Violation;
        sh:message "La propiedad dct:relation debe estar presente al menos una vez."@es ;
        sh:message "The dct:relation property must be present at least once."@en ;
    ], 
    [
        sh:path dct:relation ;
        sh:nodeKind sh:IRI ;
        sh:severity sh:Violation;
        sh:message "El valor de dct:relation debe ser un IRI."@es ;
        sh:message "The value of dct:relation must be an IRI."@en ;
    ], 
    # dcat:hadRole
    [
        sh:path dcat:hadRole ;
        sh:minCount 1 ;
        sh:severity sh:Violation;
        sh:message "La propiedad dcat:hadRole debe estar presente al menos una vez."@es ;
        sh:message "The dcat:hadRole property must be present at least once."@en ;
    ], 
    [
        sh:path dcat:hadRole ;
        sh:nodeKind sh:IRI ;
        sh:severity sh:Violation;
        sh:message "El valor de dcat:hadRole debe ser un IRI."@es ;
        sh:message "The value of dcat:hadRole must be an IRI."@en ;
    ];
    sh:severity sh:Violation ;
    foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.qualifiedrelation> ;
    sh:message "El valor de dcat:qualifiedRelation debe ser un dcat:Relationship."@es ;
    sh:message "The value of dcat:qualifiedRelation must be a dcat:Relationship."@en .

dcatapes:TimeDaysRestriction
    a sh:NodeShape ;
    sh:property [
        sh:path time:days ;
        sh:node dcatapes:NonNegativeIntegerRestriction ;
        sh:maxCount 1 ;
        sh:minCount 1;
    ] .

dcatapes:TimeHoursRestriction
    a sh:NodeShape ;
    sh:property [
        sh:path time:hours ;
        sh:node dcatapes:NonNegativeIntegerRestriction ;
        sh:maxCount 1 ;
        sh:minCount 1;
    ] .

dcatapes:TimeMinutesRestriction
    a sh:NodeShape ;
    sh:property [
        sh:path time:minutes ;
        sh:node dcatapes:NonNegativeIntegerRestriction ;
        sh:maxCount 1 ;
        sh:minCount 1;
    ] .

dcatapes:TimeMonthsRestriction
    a sh:NodeShape ;
    sh:property [
        sh:path time:months ;
        sh:node dcatapes:NonNegativeIntegerRestriction ;
        sh:maxCount 1 ;
        sh:minCount 1;
    ] .

dcatapes:TimeSecondsRestriction
    a sh:NodeShape ;
    sh:property [
        sh:path time:seconds ;
        sh:node dcatapes:NonNegativeIntegerRestriction ;
        sh:maxCount 1 ;
        sh:minCount 1;
    ] .

dcatapes:TimeWeeksRestriction
    a sh:NodeShape ;
    sh:property [
        sh:path time:weeks ;
        sh:node dcatapes:NonNegativeIntegerRestriction ;
        sh:maxCount 1 ;
        sh:minCount 1;
    ] .

dcatapes:TimeYearsRestriction
    a sh:NodeShape ;
    sh:property [
        sh:path time:years ;
        sh:node dcatapes:NonNegativeIntegerRestriction ;
        sh:maxCount 1 ;
        sh:minCount 1;
    ] .

#--------------------------
# Vocabulary restrictions
#--------------------------
dcatapes:DatasetTypeRestriction
    a sh:NodeShape ;
    rdfs:comment "Restricción para validar que los valores de dct:type sean IRIs válidos del vocabulario europeo de tipos de conjuntos de datos."@es ;
    rdfs:comment "Restriction to validate that dct:type values are valid IRIs from the European dataset type vocabulary."@en ;
    rdfs:label "Restricción de tipo de conjunto de datos"@es ;
    rdfs:label "Dataset Type Restriction"@en ;
    sh:name "Dataset Type Restriction"@en ;
    sh:name "Restricción de tipo de conjunto de datos"@es ;
    sh:nodeKind sh:IRI ;
    sh:pattern "^http://publications\\.europa\\.eu/resource/authority/dataset-type/.+$" ;
    sh:severity sh:Violation ;
    foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.type> ;
    sh:message "El valor debe ser un IRI del vocabulario europeo de tipos de conjunto de datos http://publications.europa.eu/resource/authority/dataset-type."@es ;
    sh:message "The value must be an IRI from the European dataset type vocabulary http://publications.europa.eu/resource/authority/dataset-type."@en .

dcatapes:FrequencyRestriction
    a sh:NodeShape ;
    rdfs:comment "Restricción para validar que los valores de dct:accrualPeriodicity sean IRIs válidos del vocabulario europeo de frecuencias."@es ;
    rdfs:comment "Restriction to validate that dct:accrualPeriodicity values are valid IRIs from the European frequency vocabulary."@en ;
    rdfs:label "Restricción de frecuencia"@es ;
    rdfs:label "Frequency Restriction"@en ;
    sh:name "Frequency Restriction"@en ;
    sh:name "Restricción de frecuencia"@es ;
    sh:nodeKind sh:IRI ;
    sh:pattern "^http://publications\\.europa\\.eu/resource/authority/frequency/.+$" ;
    sh:severity sh:Violation ;
    foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.accrualperiodicity> ;
    sh:message "El valor debe ser un IRI del vocabulario europeo de frecuencias http://publications.europa.eu/resource/authority/frequency."@es ;
    sh:message "The value must be an IRI from the European frequency vocabulary http://publications.europa.eu/resource/authority/frequency."@en .

dcatapes:INSPIREDatasetTypeRestriction
    a sh:NodeShape ;
    rdfs:comment "Restricción para validar que los valores de dct:type para conjuntos de datos INSPIRE utilicen el IRI oficial especificado."@es ;
    rdfs:comment "Restriction to validate that dct:type values for INSPIRE datasets use the official specified IRI."@en ;
    rdfs:label "Restricción de tipo de conjunto de datos INSPIRE"@es ;
    rdfs:label "INSPIRE Dataset Type Restriction"@en ;
    sh:name "INSPIRE Dataset Type"@en ;
    sh:name "Tipo de conjunto de datos INSPIRE"@es ;
    sh:nodeKind sh:IRI ;
    sh:pattern "^http://inspire\\.ec\\.europa\\.eu/metadata-codelist/ResourceType/dataset$" ;
    sh:severity sh:Violation ;
    foaf:page <https://datosgobes.github.io/DCAT-AP-ES/#Dataset.type> ;
    sh:message "El valor debe ser exactamente el IRI http://inspire.ec.europa.eu/metadata-codelist/ResourceType/dataset."@es ;
    sh:message "The value must be exactly the IRI http://inspire.ec.europa.eu/metadata-codelist/ResourceType/dataset."@en .
